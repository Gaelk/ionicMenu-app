<!--
  Generated template for the TodoListPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    <ion-title>todoList</ion-title>
  </ion-navbar>
  <ion-segment [(ngModel)]="filter">
    <ion-segment-button value="all">All</ion-segment-button>
    <ion-segment-button value="done">Done</ion-segment-button>
    <ion-segment-button value="not done">Undone</ion-segment-button>>
  </ion-segment>
</ion-header>


<ion-content padding>

  <ion-list>

    <ion-item-sliding *ngFor="let item of filterTodo(); let pos=index">
      <ion-item>
        <ion-label (click)="goToForm(item,pos)"> {{item.title}} </ion-label>
        <ion-toggle [(ngModel)]="item.done" (ionChange)="persitTask()"> </ion-toggle>
      </ion-item>

      <ion-item-options side="right">
        <button ion-button ion-icon-only color="danger" (click)="delete(pos)">
                <ion-icon name="trash"></ion-icon>
          </button>
      </ion-item-options>
    </ion-item-sliding>


  </ion-list>



<!-- listing des taches afaire avec des boucles-->
  <ion-list>

    <ion-item>
      <ion-label> Filtre </ion-label>
      <ion-toggle [(ngModel)]="varfilter"> </ion-toggle>


    </ion-item>
    <ion-item *ngIf="varfilter">
      <ion-item *ngFor="let item of todos; let pos=index">
          <ion-item *ngIf="item.done">
            <p> {{item.title}} </p>
        </ion-item>
      </ion-item>
    </ion-item>
  
  </ion-list>

  <ion-footer>
    <button ion-button block (click)="goToForm(null,-1)">Nouvelle Tache</button>
  </ion-footer>